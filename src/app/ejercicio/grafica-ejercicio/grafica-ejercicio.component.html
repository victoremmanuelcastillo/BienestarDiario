<!-- src/app/ejercicio/grafica-ejercicio/grafica-ejercicio.component.html -->
<div class="graficas-container">
    <!-- Header -->
    <div class="header-section">
      <h2 class="section-title"> Estad√≠sticas de Ejercicio</h2>
      <p class="section-subtitle">Analiza tu progreso y rendimiento en los entrenamientos</p>
      
      <!-- Controles de per√≠odo -->
      <div class="period-controls">
        <button class="period-btn" 
                [class.active]="periodoActual === 'semana'"
                (click)="cambiarPeriodo('semana')">Esta Semana</button>
        <button class="period-btn" 
                [class.active]="periodoActual === 'mes'"
                (click)="cambiarPeriodo('mes')">Este Mes</button>
        <button class="period-btn" 
                [class.active]="periodoActual === 'a√±o'"
                (click)="cambiarPeriodo('a√±o')">Este A√±o</button>
        
      </div>
    </div>
  
    <!-- Tarjetas de resumen -->
    <div class="stats-cards">
      <div class="stat-card">
        <div class="stat-icon">üèÉ‚Äç‚ôÇÔ∏è</div>
        <div class="stat-info">
          <h3>{{ totalEjercicios }}</h3>
          <p>Ejercicios Completados</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">‚è±Ô∏è</div>
        <div class="stat-info">
          <h3>{{ tiempoTotal }} min</h3>
          <p>Tiempo Total</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üî•</div>
        <div class="stat-info">
          <h3>{{ caloriasTotal }}</h3>
          <p>Calor√≠as Quemadas</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üìà</div>
        <div class="stat-info">
          <h3>{{ promedioSemanal }} min</h3>
          <p>Promedio Diario</p>
        </div>
      </div>
    </div>
  
    <!-- Grid de gr√°ficas -->
    <div class="charts-grid">
      <!-- Gr√°fica de Progreso -->
      <div class="chart-container">
        <div class="chart-header">
          <h3>Progreso de Entrenamientos</h3>
          <div class="chart-legend">
            <span class="legend-item">
              <span class="legend-color legend-color-primary"></span>
              Duraci√≥n en minutos
            </span>
          </div>
        </div>
        <div class="chart-wrapper">
          <canvas #chartProgreso></canvas>
        </div>
      </div>
  
      <!-- Gr√°fica de Calor√≠as -->
      <div class="chart-container">
        <div class="chart-header">
          <h3>Calor√≠as por D√≠a</h3>
          <div class="chart-info">
            <span class="info-badge">Promedio: {{ Math.round(caloriasTotal / 7) }} cal/d√≠a</span>
          </div>
        </div>
        <div class="chart-wrapper">
          <canvas #chartCalorias></canvas>
        </div>
      </div>
  
      <!-- Gr√°fica de Categor√≠as -->
      <div class="chart-container">
        <div class="chart-header">
          <h3>Distribuci√≥n de Ejercicios</h3>
          <div class="chart-info">
            <span class="info-badge">Por categor√≠as</span>
          </div>
        </div>
        <div class="chart-wrapper doughnut-wrapper">
          <canvas #chartCategorias></canvas>
        </div>
      </div>
  
      <!-- Gr√°fica Radar -->
      <div class="chart-container">
        <div class="chart-header">
          <h3>An√°lisis de Rendimiento</h3>
          <div class="chart-info">
            <span class="info-badge">Vista general</span>
          </div>
        </div>
        <div class="chart-wrapper radar-wrapper">
          <canvas #chartSemanal></canvas>
        </div>
      </div>
    </div>
  
    <!-- Tabla de progreso semanal -->
    <div class="progress-table-container">
      <h3>Resumen Semanal</h3>
      <div class="table-wrapper">
        <table class="progress-table">
          <thead>
            <tr>
              <th>Per√≠odo</th>
              <th>Entrenamientos</th>
              <th>Tiempo Total</th>
              <th>Calor√≠as</th>
              <th>Tendencia</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let progreso of progresoMensual; let i = index">
              <td>{{ progreso.semana }}</td>
              <td>
                <span class="metric-badge">{{ progreso.entrenamientos }}</span>
              </td>
              <td>{{ progreso.tiempoTotal }} min</td>
              <td>{{ progreso.caloriasQuemadas }} cal</td>
              <td>
                <span class="trend-indicator" 
                      [ngClass]="{
                        'trend-up': i > 0 && progreso.entrenamientos > progresoMensual[i-1].entrenamientos,
                        'trend-down': i > 0 && progreso.entrenamientos < progresoMensual[i-1].entrenamientos
                      }">
                  <i class="fas fa-arrow-up" *ngIf="i > 0 && progreso.entrenamientos > progresoMensual[i-1].entrenamientos"></i>
                  <i class="fas fa-arrow-down" *ngIf="i > 0 && progreso.entrenamientos < progresoMensual[i-1].entrenamientos"></i>
                  <i class="fas fa-minus" *ngIf="i === 0 || progreso.entrenamientos === progresoMensual[i-1].entrenamientos"></i>
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  
    <!-- Secci√≥n de metas -->
    <div class="goals-section">
      <h3>üéØ Metas de la Semana</h3>
      <div class="goals-grid">
        <div class="goal-card">
          <div class="goal-progress">
            <div class="progress-circle" 
                 [attr.data-progress]="Math.min(Math.round((totalEjercicios / 50) * 100), 100)">
              <span>{{ totalEjercicios }}/50</span>
            </div>
          </div>
          <h4>Ejercicios</h4>
          <p>Meta semanal</p>
        </div>
        
        <div class="goal-card">
          <div class="goal-progress">
            <div class="progress-circle" 
                 [attr.data-progress]="Math.min(Math.round((tiempoTotal / 300) * 100), 100)">
              <span>{{ tiempoTotal }}/300</span>
            </div>
          </div>
          <h4>Minutos</h4>
          <p>Meta semanal</p>
        </div>
        
        <div class="goal-card">
          <div class="goal-progress">
            <div class="progress-circle" 
                 [attr.data-progress]="Math.min(Math.round((caloriasTotal / 2500) * 100), 100)">
              <span>{{ caloriasTotal }}/2500</span>
            </div>
          </div>
          <h4>Calor√≠as</h4>
          <p>Meta semanal</p>
        </div>
      </div>
    </div>
  </div>